<!-- Header for Change 4 Change -->

<!DOCTYPE html>
<html lang="en">

<!-- These are the required meta tags for proper rendering and encoding -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <!-- The page title that appears in browser tab -->
    <title>Change 4 Change</title>
     <!-- Links to the external stylesheet -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>

<body>
    <!-- Pass user type information to JavaScript -->
    {% if current_user.is_authenticated %}
        <input type="hidden" id="user-type-data" value="donor">
    {% elif session.get('ngo_id') %}
        <input type="hidden" id="user-type-data" value="ngo">
    {% else %}
        <input type="hidden" id="user-type-data" value="none">
    {% endif %}
    
    <!-- The header section that contains the navigation and branding -->
    <header>
        <!-- Main navigation bar -->
        <nav>
            <!-- The Left side of navigation bar -->
            <div class="nav-left">
                <a href="/" class="home-button">
                    <img src="{{url_for('static', filename='images/logo.webp')}}" alt="Change 4 Change Logo" width="200" height="50">
                </a>
                <ul class="nav-links">
                    <li><a href="/search">Search</a></li>
                    <li><a href="/about">Why Change 4 Change</a></li>
                    {% if current_user.is_authenticated %}
                        <li><a href="/donate">Donate</a></li>
                    {% endif %}
                    {% if session.get('ngo_id') %}
                        <li><a href="/create">Create Campaign</a></li>
                    {% endif %}
                </ul>
            </div>
            <!-- The right side of navigation -->
            <div class="buttons">
                {% if current_user.is_authenticated %}
                    <a href="/donor-dashboard" class="btn-login">Profile</a>
                    <a href="/logout" class="btn-login">Logout</a>
                {% elif session.get('ngo_id') %}
                    <a href="/ngo-dashboard" class="btn-login">Profile</a>
                    <a href="/logout" class="btn-login">Logout</a>
                {% else %}
                    <a href="/donor-login" class="btn-login">Donor Login</a>
                    <a href="/ngo-login" class="btn-login">Ngo Login</a>
                    <a href="/donor-registration" class="btn-login">Register</a>
                {% endif %}
            </div>
        </nav>
    </header>

    <!-- Force browser to reload the page on NGO login success -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                {% if message == "NGO login successful!" %}
                    <script>
                        // Forces the page refresh to update navigation
                        if (window.location.pathname.includes('ngo-dashboard')) {
                            setTimeout(function() {
                                window.location.reload();
                            }, 100);
                        }
                    </script>
                {% endif %}
            {% endfor %}
        {% endif %}
    {% endwith %}

    <script src="{{ url_for('static', filename='js/navigation-control.js') }}"></script>
</body>